<div class="overflow-hidden">
    <div id="lessonViewerSettingsAppRegion"></div>

    <input type="hidden" id="SCORMContextPath" value="{{contextPath}}"/>
</div>

<!-- dependencies are placed here to exclude conflict with backbone in the main view -->

<script src="{{contextPath}}/js2.0/vendor/backbone.marionette.min.2.4.1.js"></script>
<script src="{{contextPath}}/js2.0/common/marionette-utils.js"></script>
<script src="{{contextPath}}/js2.0/common/valamisApp.js"></script>
<script src="{{contextPath}}/js2.0/common/valamisModels.js"></script>
<script src="{{contextPath}}/js2.0/common/valamisViews.js"></script>
<script src="{{contextPath}}/js2.0/common/valamisModalViews.js"></script>
<script src="{{contextPath}}/js2.0/common/views/selectLesson.js"></script>

<script src="{{contextPath}}/js2.0/lesson-viewer-settings/app.js"></script>
<script src="{{contextPath}}/js2.0/lesson-viewer-settings/entities.js"></script>
<script src="{{contextPath}}/js2.0/lesson-viewer-settings/views.js"></script>

<script type="text/javascript">

    jQueryValamis(function () {

        if (!valamisApp.started) {
            valamisApp.start();
        }

        /**
         * Mobile IE10 hack
         */
        if ("-ms-user-select" in document.documentElement.style && navigator.userAgent.match(/IEMobile\/10\.0/)) {
            var msViewportStyle = document.createElement("style");
            msViewportStyle.appendChild(
                    document.createTextNode("@-ms-viewport{width:auto!important}")
            );
            document.getElementsByTagName("head")[0].appendChild(msViewportStyle);
        }
        /** Mobile IE10 hack */

        var lessonViewerSettingsOptions = {
            resourceName: 'lessonViewer',
            permissions: {},
            app: lessonViewerSettings,
            appOptions: {
                playerId: '{{playerId}}',
                defaultLessonId: '{{defaultLessonId}}'
            }
        };

        valamisApp.execute('subapp:start', lessonViewerSettingsOptions);

    });

</script>